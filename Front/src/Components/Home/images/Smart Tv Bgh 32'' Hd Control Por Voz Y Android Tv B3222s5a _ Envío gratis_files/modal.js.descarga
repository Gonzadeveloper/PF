function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,e,a){return e&&_defineProperties(n.prototype,e),a&&_defineProperties(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}var ModalIframe=function(){"use strict";var n=function(n){var e=n.width,a=n.height;return'\n<div data-js="modal-iframe-content"\nclass="andes-modal-dialog andes-modal--loose"\nstyle="width: '.concat(e,"; height: ").concat(a,';"></div>\n')},e=function(){return'\n<div data-js="modal-iframe-spinner" class="andes-spinner andes-spinner--fullscreen">\n  <div class="andes-spinner__container andes-spinner__container--medium andes-spinner__container--medium-notlabel">\n    <div class="andes-spinner__icon andes-spinner__icon--medium">\n      <div class="andes-spinner__icon-right">\n        <div class="andes-spinner__icon-border"></div>\n      </div>\n      <div class="andes-spinner__icon-left">\n        <div class="andes-spinner__icon-border"></div>\n      </div>\n    </div>\n  </div>\n  <div class="andes-spinner__mask"></div>\n</div>\n'},a=function(){return'\n<div data-js="modal-iframe-overlay" class="andes-modal-bg" role="button" tabindex="0"></div>\n'};!function(n,e){void 0===e&&(e={});var a=e.insertAt;if(n&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===a&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}('.andes-spinner {\n  font-family: "Proxima Nova", -apple-system, "Helvetica Neue", Helvetica, "Roboto", Arial, sans-serif;\n  font-size: 16px;\n}\n.andes-spinner__icon {\n  width: 32px;\n  height: 32px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0 auto;\n  animation: rotate-all 1s linear infinite;\n}\n.andes-spinner__icon-right, .andes-spinner__icon-left {\n  position: absolute;\n  top: 0;\n  width: 50%;\n  height: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.andes-spinner__icon-left {\n  left: 0;\n}\n.andes-spinner__icon-right {\n  right: 0;\n}\n.andes-spinner__icon-border {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  border-radius: 200px 0 0 200px;\n  border: 2px solid #3483fa;\n  box-sizing: border-box;\n}\n.andes-spinner__icon-right .andes-spinner__icon-border {\n  border-radius: 0 200px 200px 0;\n  border-left: 0;\n  transform: rotate(-10deg);\n  transform-origin: left center;\n  animation: rotate-right 0.75s linear infinite alternate;\n}\n.andes-spinner__icon-right .andes-spinner__icon-border:after {\n  bottom: -10px;\n  left: -5px;\n}\n.andes-spinner__icon-left .andes-spinner__icon-border {\n  border-right: 0;\n  transform: rotate(10deg);\n  transform-origin: right center;\n  animation: rotate-left 0.75s linear infinite alternate;\n}\n.andes-spinner__icon-left .andes-spinner__icon-border:after {\n  bottom: -10px;\n  right: -5px;\n}\n.andes-spinner--highlight .andes-spinner__label {\n  color: #fff;\n}\n.andes-spinner--highlight .andes-spinner__icon-border {\n  border-color: #fff;\n}\n@keyframes rotate-left {\n  to {\n    transform: rotate(30deg);\n  }\n  from {\n    transform: rotate(175deg);\n  }\n}\n@keyframes rotate-right {\n  from {\n    transform: rotate(-175deg);\n  }\n  to {\n    transform: rotate(-30deg);\n  }\n}\n@keyframes rotate-all {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.modal-iframe-cp .andes-spinner__container--medium-notlabel {\n  width: 48px;\n  height: 48px;\n}\n.modal-iframe-cp .andes-spinner__container--medium .andes-spinner__label {\n  display: block;\n  margin-top: 66px;\n  line-height: 1;\n}\n.modal-iframe-cp .andes-spinner__icon--medium {\n  width: 48px;\n  height: 48px;\n}\n.modal-iframe-cp .andes-spinner__mask {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: rgba(255, 255, 255, 0.9);\n}\n.modal-iframe-cp .andes-spinner__mask--highlight {\n  background-color: rgba(52, 131, 250, 0.9);\n}\n.modal-iframe-cp .andes-spinner--fullscreen {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1022;\n}\n.modal-iframe-cp .andes-spinner--fullscreen .andes-spinner__container {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1023;\n}\n.modal-iframe-cp .andes-modal-bg {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1020;\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 1;\n  animation: fadeIn 0.2s ease-in-out;\n  will-change: opacity;\n}\n.modal-iframe-cp .andes-modal-dialog {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  height: 100%;\n  font-family: "Proxima Nova", -apple-system, "Helvetica Neue", Helvetica, "Roboto", Arial, sans-serif;\n  font-size: 16px;\n  font-weight: 400;\n  z-index: 1021;\n  box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.07), 0 20px 25px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  background: #fff;\n  transform: translate(-50%, -50%);\n  opacity: 1;\n  animation: translateIn 0.2s ease-in-out, fadeIn 0.2s ease-in-out;\n  will-change: opacity, transform;\n}\n.modal-iframe-cp .andes-modal-dialog--closing {\n  animation: translateOut 0.2s ease-in-out, fadeOut 0.2s ease-in-out;\n  transform: translate(-50%, calc(-50% + 20px));\n  opacity: 0;\n}\n.modal-iframe-cp .andes-modal-bg--closing {\n  animation: fadeOut 0.2s ease-in-out;\n  opacity: 0;\n}\n.modal-iframe-cp .andes-modal-dialog__button-close {\n  position: absolute;\n  z-index: 1022;\n}\n.modal-iframe-cp .andes-modal-dialog__button-close:after, .modal-iframe-cp .andes-modal-dialog__button-close:before {\n  opacity: 1;\n}\n.modal-iframe-cp .andes-modal-dialog__button-close:hover:before, .modal-iframe-cp .andes-modal-dialog__button-close:hover:after {\n  background-color: #1e6dff;\n}\n.modal-iframe-cp .andes-modal-dialog__container {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: absolute;\n  -webkit-overflow-scrolling: touch;\n  box-sizing: content-box;\n}\n.modal-iframe-cp .andes-modal-dialog__content {\n  color: rgba(0, 0, 0, 0.45);\n  -webkit-font-smoothing: antialiased;\n}\n.modal-iframe-cp .andes-modal-dialog--is-open {\n  overflow: hidden;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n@keyframes translateIn {\n  from {\n    transform: translate(-50%, calc(-50% + 20px));\n  }\n  to {\n    transform: translate(-50%, -50%);\n  }\n}\n@keyframes translateOut {\n  from {\n    transform: translate(-50%, -50%);\n  }\n  to {\n    transform: translate(-50%, calc(-50% + 20px));\n  }\n}\n@media (min-width: 768px) {\n  .modal-iframe-cp .andes-modal-dialog {\n    max-width: 40em;\n    max-height: 30em;\n  }\n  .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__button-close {\n    position: relative;\n    width: 1em;\n    height: 1em;\n    cursor: pointer;\n    position: absolute;\n    left: auto;\n    right: 64px;\n    top: 64px;\n    padding: 0;\n    margin-top: 14px;\n  }\n  .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__button-close:after, .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__button-close:before {\n    position: absolute;\n    left: 0.5em;\n    top: 0;\n    content: "";\n    height: 1em;\n    width: 2px;\n    background-color: #3483fa;\n    cursor: pointer;\n  }\n  .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__button-close:before {\n    transform: rotate(45deg);\n  }\n  .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__button-close:after {\n    transform: rotate(-45deg);\n  }\n  .modal-iframe-cp .andes-modal--loose .andes-modal-dialog__content {\n    padding: 64px;\n  }\n}\n.modal-iframe-cp .andes-modal-dialog {\n  max-width: calc(100% - 16px);\n  max-height: calc(100% - 16px);\n}\n.modal-iframe-cp .andes-spinner__mask {\n  background: #fff;\n}\n\n.modal-iframe-cp-hidden {\n  overflow: hidden !important;\n}');var t=n,i=e,o=a,r={common:{label:"Elige dónde recibir tus compras"},"es-AR":{label:"Elegí dónde recibir tus compras"},"pt-BR":{label:"Selecione onde quer receber suas compras"}},s=function(){function n(e){var a=this,t=e.src,i=e.bus,o=e.trigger,r=e.width,s=e.height;_classCallCheck(this,n),this.bus=i||window.freya,this.container=document.body,this.trigger=document.querySelector(o||".nav-menu-cp"),this.trigger.ariaExpanded=!1,this.trigger.ariaHasPopup=!0,this.width=r||"672px",this.height=s||"315px",this.iframe=null,this.iframeSrc=t||"".concat(this.trigger.href,"&mode=embed"),this.createModalElements(),this.hideByEscaping=this.hideByEscaping.bind(this),this.bus.on("modal-cp:show",(function(){return a.show()})),this.bus.on("modal-cp:hide",(function(){return a.hide(!0)})),this.trigger.addEventListener("click",(function(n){n.preventDefault(),a.show()}),!1),window.addEventListener("message",(function(n){switch(n.data.type){case"nav:cp:update":window.location.reload();break;case"nav:cp:close":a.hide(!0),a.trigger.focus();break;case"nav:cp:updateSize":a.content.style.height=n.data.height,a.content.style.width=n.data.width,a.spinner.parentNode&&a.spinner.parentNode.removeChild(a.spinner)}}))}return _createClass(n,[{key:"hideByEscaping",value:function(n){27===n.keyCode&&this.hide(!0)}},{key:"createModalElements",value:function(){var n=this,e=document.createDocumentFragment(),a=document.getElementsByTagName("html")[0].getAttribute("lang");this.wrapper=document.createElement("div"),this.wrapper.className="modal-iframe-cp",this.wrapper.insertAdjacentHTML("beforeend",t({width:this.width,height:this.height})),this.wrapper.tabIndex=-1,this.wrapper.role="dialog",this.wrapper.ariaHidden=!1,this.wrapper.ariaModal=!0,this.wrapper.ariaLabel=r[a]?r[a].label:r.common.label,e.appendChild(this.wrapper),this.content=e.querySelector('[data-js="modal-iframe-content"]'),this.content.insertAdjacentHTML("beforeend",i()),this.spinner=e.querySelector('[data-js="modal-iframe-spinner"]'),this.wrapper.insertAdjacentHTML("beforeend",o()),this.overlay=e.querySelector('[data-js="modal-iframe-overlay"]'),this.overlay.addEventListener("click",(function(){return n.hide(!0)}),!1)}},{key:"createIframe",value:function(){var n=document.createElement("iframe");return n.src=this.iframeSrc,n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.frameBorder="0",n.allowtransparency="true",n.scrolling="yes",n}},{key:"show",value:function(){this.trigger.ariaExpanded=!0,this.container.classList.add("modal-iframe-cp-hidden"),this.iframe||(this.iframe=this.createIframe(),this.content.appendChild(this.iframe)),this.content.appendChild(this.spinner),this.container.appendChild(this.wrapper),document.addEventListener("keydown",this.hideByEscaping,!1),this.bus.emit("onboarding-cp:hide")}},{key:"hide",value:function(n){this.trigger.ariaExpanded=!1,this.container.classList.remove("modal-iframe-cp-hidden"),this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper),document.removeEventListener("keydown",this.hideByEscaping,!1),this.content.style.height=this.height,this.content.style.width=this.width,this.content.classList.remove("modal-full"),n&&(window.meli_ga&&window.meli_ga("send","event","CURRENT_LOCATION","NAVIGATION","CLOSE"),window.melidata&&window.melidata("cleanAndSend","event",{path:"/current_location/navigation/close",event_data:{}}))}}]),n}();return new s({trigger:".nav-menu-cp",bus:window.freya||window.meli})}();
